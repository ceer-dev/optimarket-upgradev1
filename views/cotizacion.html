<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>OPTIMARKET</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/style.css?v=218.10" />
    <link rel="stylesheet" href="../css/cotizacion.css?v=218.10" />
  </head>
  <body>
    <!-- Header Placeholder -->
    <div id="header-container"></div>

    <div
      id="quotationView"
      class="view-container active"
      style="display: block; padding-top: 1rem"
    >
      <div class="container">
        <!-- Help Section (Dynamic) -->
        <div id="helpSection" class="help-section animate-fade-in">
          <!-- Populated by JS -->
        </div>

        <!-- Category Selector -->
        <div class="category-selector-wrapper">
          <div class="category-selector" id="categorySelector">
            <button
              class="cat-btn active"
              data-cat="Lentilla"
              id="btn-Lentilla"
            >
              <i class="fas fa-eye"></i> Organico / Vidrio
            </button>
            <button
              class="cat-btn"
              data-cat="Material Listo"
              id="btn-Material Listo"
            >
              <i class="fas fa-glasses"></i> Material Listo
            </button>
            <button class="cat-btn" data-cat="Block" id="btn-Block">
              <i class="fas fa-cubes"></i> Block
            </button>
          </div>
        </div>

        <!-- Dynamic Search Form -->
        <div class="search-section glass-card animate-fade-in">
          <!-- Subcategory Selector (Dynamic) -->
          <div
            id="subCategoryContainer"
            class="hidden"
            style="margin-bottom: 1rem"
          >
            <!-- Injected dynamically -->
          </div>

          <div id="dynamicForm">
            <!-- Injected dynamically -->
          </div>

          <button id="searchBtn" class="btn btn-primary w-100 mt-1">
            <i class="fas fa-search"></i> Buscar
          </button>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="results-container hidden">
          <h3 class="section-title">Resultados</h3>
          <div id="resultsGrid" class="results-grid">
            <!-- Results injected dynamically -->
          </div>
        </div>

        <!-- Cart / Order Summary -->
        <div id="cartSection" class="cart-section glass-card mt-2 hidden">
          <h3 class="section-title">Pedido Actual</h3>
          <div id="cartItems" class="cart-items">
            <!-- Cart items injected dynamically -->
          </div>

          <div class="cart-total glass">
            <span>Total General:</span>
            <span id="grandTotal" class="total-amount">0.00 Bs.</span>
          </div>

          <!-- Payment Method Selector -->
          <div class="payment-method-section">
            <label
              class="form-label"
              style="margin-bottom: 0.5rem; display: block"
            >
              <i class="fas fa-credit-card"></i> MÃ©todo de Pago:
            </label>
            <div class="payment-options">
              <button
                id="paymentQR"
                class="payment-btn active"
                data-method="QR"
              >
                <i class="fas fa-qrcode"></i> QR
              </button>
              <button
                id="paymentEfectivo"
                class="payment-btn"
                data-method="EFECTIVO"
              >
                <i class="fas fa-money-bill-wave"></i> Efectivo
              </button>
            </div>
          </div>

          <button id="whatsappBtn" class="btn btn-whatsapp w-100 animate-pulse">
            <i class="fab fa-whatsapp"></i> Generar Pedido WhatsApp
          </button>
        </div>
      </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-container"></div>

    <!-- Notification Toast (Injected by JS usually, but kept here for backup) -->

    <!-- Scripts -->
    <!-- Libraries -->

    <!-- Hidden Netlify Forms for Analytics -->
    <form name="historial-pedido" netlify netlify-honeypot="bot-field" hidden>
      <input type="text" name="nombre" />
      <input type="text" name="celular" />
      <input type="text" name="nit" />
      <input type="text" name="items" />
      <input type="text" name="total" />
      <input type="text" name="metodo_pago" />
      <input type="text" name="timestamp" />
    </form>
    <form name="auditoria-clicks" netlify netlify-honeypot="bot-field" hidden>
      <input type="text" name="nombre" />
      <input type="text" name="celular" />
      <input type="text" name="accion" />
      <input type="text" name="detalle" />
      <input type="text" name="timestamp" />
    </form>

    <!-- Scripts -->
    <script src="../js/analytics.js?v=218.10"></script>
    <script src="../js/data.js?v=218.10"></script>
    <script src="../js/auth.js?v=218.10"></script>
    <script src="../js/ui.js?v=218.10"></script>
    <script src="../js/cotizacion.js?v=218.10"></script>

    <script>
      // Init Auth Check
      Auth.check();
    </script>
  </body>
</html>
